import{u as X}from"./use-quasar.967395eb.js";import{i as O,a4 as P,r as Q,$ as T,o as u,c as K,w as z,e as _,a9 as b,a5 as e,aC as v,b as h,t as C,g as f,aa as G,a8 as y,aK as H,a6 as Y,a as o,a0 as L,a1 as Z,a3 as ee}from"./index.66a65c15.js";import{c as oe,a as g,b as te}from"./index.esm.3ac0c307.js";import{u as ne,a as k}from"./vee-validate.esm.06ebb446.js";const se={key:0,class:"error"},ae={key:1,class:"error"},le={key:2,class:"error"},re={key:3,class:"error"},ce={key:4,class:"error"},ie=O({__name:"CreateConnectionDialog",props:["show","selectedConnection"],emits:["closeDialog"],setup(j,{emit:x}){var A,E,q,N,I,S,U,B,R,F;const l=j,n=P(),c=Q({schema:oe({name:g().nullable("Connection name is required!").required("Connection name is required!"),host:g(),port:te(),username:g(),password:g()})}),{handleSubmit:V,errors:t}=ne({validationSchema:c.schema,initialValues:{name:(E=(A=l.selectedConnection)==null?void 0:A.name)!=null?E:void 0,host:(N=(q=l.selectedConnection)==null?void 0:q.host)!=null?N:"localhost",port:(S=(I=l.selectedConnection)==null?void 0:I.port)!=null?S:27017,username:(B=(U=l.selectedConnection)==null?void 0:U.username)!=null?B:void 0,password:(F=(R=l.selectedConnection)==null?void 0:R.password)!=null?F:void 0}}),{value:p}=k("name"),{value:i}=k("host"),{value:r}=k("port"),{value:d}=k("username"),{value:s}=k("password");function w(){x("closeDialog")}function D(){if(n.project.dbConnection.filter(a=>a.name==p.value)[0]){y.error("This name exists. Choose another name");return}n.project.dbConnection.push(new H.DbConnection({name:p.value,host:i.value,port:r.value,username:d.value,password:s.value}))}function J(){let $=n.project.dbConnection.findIndex(a=>a.name==l.selectedConnection.name);n.project.dbConnection[$]=new H.DbConnection({name:p.value,host:i.value,port:r.value,username:d.value,password:s.value})}function M(){V(async()=>{l.selectedConnection?J():D(),await G.save(n.project),y.success("Connection was added successfully."),w()})()}return($,a)=>{const W=T("Dialog");return u(),K(W,{show:l.show,title:l.selectedConnection?"Edit Connection":"Create Connection",onCloseDialog:w,onConfirmDialog:M},{default:z(()=>[_(b,{outlined:"",class:"mt-3",modelValue:e(p),"onUpdate:modelValue":a[0]||(a[0]=m=>v(p)?p.value=m:null),error:!!e(t).name,dark:e(n).isDark,label:"Name*","hide-bottom-space":""},null,8,["modelValue","error","dark"]),e(t).name?(u(),h("span",se,C(e(t).name),1)):f("",!0),_(b,{outlined:"",class:"mt-3",modelValue:e(i),"onUpdate:modelValue":a[1]||(a[1]=m=>v(i)?i.value=m:null),error:!!e(t).host,dark:e(n).isDark,"hide-bottom-space":"",label:"Host"},null,8,["modelValue","error","dark"]),e(t).name?(u(),h("span",ae,C(e(t).host),1)):f("",!0),_(b,{outlined:"",class:"mt-3",modelValue:e(r),"onUpdate:modelValue":a[2]||(a[2]=m=>v(r)?r.value=m:null),error:!!e(t).port,dark:e(n).isDark,"hide-bottom-space":"",label:"Port",type:"number"},null,8,["modelValue","error","dark"]),e(t).name?(u(),h("span",le,C(e(t).port),1)):f("",!0),_(b,{outlined:"",class:"mt-3",modelValue:e(d),"onUpdate:modelValue":a[3]||(a[3]=m=>v(d)?d.value=m:null),error:!!e(t).username,dark:e(n).isDark,"hide-bottom-space":"",label:"username"},null,8,["modelValue","error","dark"]),e(t).name?(u(),h("span",re,C(e(t).username),1)):f("",!0),_(b,{outlined:"",class:"mt-3",modelValue:e(s),"onUpdate:modelValue":a[4]||(a[4]=m=>v(s)?s.value=m:null),error:!!e(t).password,dark:e(n).isDark,"hide-bottom-space":"",label:"password"},null,8,["modelValue","error","dark"]),e(t).name?(u(),h("span",ce,C(e(t).password),1)):f("",!0)]),_:1},8,["show","title"])}}}),de={class:"card"},ue={class:"card-body"},me={class:"flex-between"},pe=o("span",null," If you want to add new connection click on the below button. ",-1),he={class:"card mt-5"},Ce=o("div",{class:"card-header"},[o("span",{class:"title"},"Connections List")],-1),_e={class:"card-body"},fe={class:"table"},be=o("thead",null,[o("tr",{class:"tr-header"},[o("th",{class:"text-left"},"Connection name"),o("th",{class:"text-left"},"Host"),o("th",{class:"text-left"},"Port"),o("th",{class:"text-left"},"Action")])],-1),ve={class:"font-bold"},ke={class:"flex items-center gap-2"},we=["onClick"],De=o("i",{class:"text-md fas fa-list"},null,-1),ge=[De],ye=["onClick"],xe=o("i",{class:"text-md fas fa-trash-alt"},null,-1),Ve=[xe],$e=["onClick"],je=o("i",{class:"text-md fas fa-pen"},null,-1),Ae=[je],Se=O({__name:"Connections",setup(j){const x=Y(),l=X(),n=P(),c=Q({showAddEditDialog:!1,selectedConnection:null});function V(){c.selectedConnection=null,c.showAddEditDialog=!1}function t(i){l.dialog({title:"Remove Connection",message:"Are you sure you would like to remove this collection?",dark:n.isDark,cancel:!0}).onOk(async()=>{const r=n.project.dbConnection.findIndex(d=>d.name==i.name);r!=-1&&n.project.dbConnection.splice(r,1);try{await G.save(n.project),y.success("Connection was removed successfully.")}catch{y.error("Removing the connection encountered problem.")}})}function p(i){c.selectedConnection=i,c.showAddEditDialog=!0}return(i,r)=>{const d=T("router-link");return u(),h(L,null,[o("div",de,[o("div",ue,[o("div",me,[pe,o("button",{class:"btn btn-green",onClick:r[0]||(r[0]=s=>c.showAddEditDialog=!0)}," New Connection ")])])]),o("div",he,[Ce,o("div",_e,[o("table",fe,[be,o("tbody",null,[(u(!0),h(L,null,Z(e(n).project.dbConnection,(s,w)=>(u(),h("tr",{class:"tr-body",key:w},[o("td",ve,[_(d,{to:`connections/${s.name}`},{default:z(()=>[ee(C(s.name),1)]),_:2},1032,["to"])]),o("td",null,C(s.host),1),o("td",null,C(s.port),1),o("td",ke,[o("button",{class:"btn-squar btn-blue",onClick:D=>e(x).push({name:"connection",params:{connectionName:s.name}})},ge,8,we),o("button",{class:"btn-squar btn-red",onClick:D=>t(s)},Ve,8,ye),o("button",{class:"btn-squar btn-yellow",onClick:D=>p(s)},Ae,8,$e)])]))),128))])])])]),c.showAddEditDialog?(u(),K(ie,{key:0,show:c.showAddEditDialog,selectedConnection:c.selectedConnection,onCloseDialog:V},null,8,["show","selectedConnection"])):f("",!0)],64)}}});export{Se as default};
