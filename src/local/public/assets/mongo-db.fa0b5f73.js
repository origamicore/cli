import{u as k}from"./use-quasar.967395eb.js";import{i as v,a4 as y,r as x,$ as C,o as c,c as $,w as A,e as j,a9 as S,a5 as l,aC as B,b as u,t as V,g as q,a as e,a8 as m,bn as F,aa as N,_ as I,a0 as R,a1 as M,a3 as w}from"./index.66a65c15.js";import{c as O,a as Q}from"./index.esm.3ac0c307.js";import{u as T,a as E}from"./vee-validate.esm.06ebb446.js";const L=e("label",null,"Database name:",-1),U={key:0,class:"error"},z=v({__name:"add-db-dialog",props:["show"],emits:["closeDialog","reload"],setup(h,{emit:s}){const b=h;k();const a=y(),p=x({schema:O({name:Q().nullable("Database name is required!").required("Database name is required!")})}),{handleSubmit:D,errors:n}=T({validationSchema:p.schema}),{value:o}=E("name");function r(){s("closeDialog")}async function t(){var d;let i=o.value;if((d=a.project.mongoDatabses)==null?void 0:d.filter(f=>f.name==i)[0]){m.error("There is a database with the same name");return}a.project.mongoDatabses.push(new F({name:i})),await N.save(a.project),m.success(`Database "${i}" was added successfully.`),s("closeDialog")}async function _(){D(async()=>{await t()})()}return(i,g)=>{const d=C("Dialog");return c(),$(d,{show:b.show,title:"Add Database",onCloseDialog:r,onConfirmDialog:_},{default:A(()=>[L,j(S,{outlined:"",error:!!l(n).name,modelValue:l(o),"onUpdate:modelValue":g[0]||(g[0]=f=>B(o)?o.value=f:null),"hide-bottom-space":"",dark:l(a).isDark,label:"Database name",type:"text",class:"mt-3"},null,8,["error","modelValue","dark"]),l(n).name?(c(),u("span",U,V(l(n).name),1)):q("",!0)]),_:1},8,["show"])}}}),G={class:"card"},H={class:"card-header"},J=e("span",{class:"title"},"Mongo Database",-1),K={class:"card-body"},P={class:"flex items-center gap-1"},W=["onClick"],X=e("i",{class:"text-md fas fa-trash-alt"},null,-1),Y=[X],oe=v({__name:"mongo-db",setup(h){const s=y();I();const b=k(),a=x({showAddDialog:!1});function p(n,o){b.dialog({title:"Remove Database",message:"Are you sure you would like to remove this database?",dark:s.isDark,cancel:!0}).onOk(async()=>{const r=s.project.mongoDatabses.findIndex(t=>t.name==n.name);r!=-1?(s.project.mongoDatabses.splice(r,1),await N.save(s.project),m.success("Database was deleted successfully.")):m.error("Database was not found!")})}function D(){a.showAddDialog=!1}return(n,o)=>{const r=C("router-link");return c(),u("div",G,[e("div",H,[J,e("button",{class:"btn btn-green",onClick:o[0]||(o[0]=t=>a.showAddDialog=!0)}," Add Database ")]),e("div",K,[(c(!0),u(R,null,M(l(s).project.mongoDatabses,(t,_)=>(c(),u("div",{key:_,class:"px-4 py-2 mt-2 flex-between rounded-lg bg-gray-300 dark:bg-gray-700"},[e("span",null,[w("Database name: "),e("b",null,V(t.name),1)]),e("div",P,[j(r,{to:`mongo-db/${t.name}`,class:"btn btn-blue"},{default:A(()=>[w(" Detail ")]),_:2},1032,["to"]),e("button",{class:"btn-squar btn-red",onClick:i=>p(t)},Y,8,W)])]))),128))]),a.showAddDialog?(c(),$(z,{key:0,show:a.showAddDialog,onCloseDialog:D},null,8,["show"])):q("",!0)])}}});export{oe as default};
