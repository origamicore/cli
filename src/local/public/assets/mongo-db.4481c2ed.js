import{u as k}from"./use-quasar.015d7623.js";import{m as v,ah as y,r as x,ac as C,o as c,b as $,w as A,h as j,am as S,ai as r,az as B,e as u,t as V,k as q,d as e,al as m,bl as F,an as N,ab as I,ad as R,ae as M,ag as w}from"./index.da47becb.js";import{c as O,a as Q}from"./index.esm.5bb29c97.js";import{u as T,a as z}from"./vee-validate.esm.0261b950.js";const E=e("label",null,"Database name:",-1),L={key:0,class:"error"},U=v({__name:"add-db-dialog",props:["show"],emits:["closeDialog","reload"],setup(h,{emit:s}){const b=h;k();const a=y(),p=x({schema:O({name:Q().nullable("Database name is required!").required("Database name is required!")})}),{handleSubmit:D,errors:n}=T({validationSchema:p.schema}),{value:o}=z("name");function l(){s("closeDialog")}async function t(){var d;let i=o.value;if((d=a.project.mongoDatabses)==null?void 0:d.filter(f=>f.name==i)[0]){m.error("There is a database with the same name");return}a.project.mongoDatabses.push(new F({name:i})),await N.save(a.project),m.success(`Database "${i}" was added successfully.`),s("closeDialog")}async function g(){D(async()=>{await t()})()}return(i,_)=>{const d=C("Dialog");return c(),$(d,{show:b.show,title:"Add Database",onCloseDialog:l,onConfirmDialog:g},{default:A(()=>[E,j(S,{outlined:"",error:!!r(n).name,modelValue:r(o),"onUpdate:modelValue":_[0]||(_[0]=f=>B(o)?o.value=f:null),"hide-bottom-space":"",dark:r(a).isDark,label:"Database name",type:"text",class:"mt-3"},null,8,["error","modelValue","dark"]),r(n).name?(c(),u("span",L,V(r(n).name),1)):q("",!0)]),_:1},8,["show"])}}}),G={class:"card"},H={class:"card-header"},J=e("span",{class:"title"},"Mongo Database",-1),K={class:"card-body"},P={class:"flex items-center gap-1"},W=["onClick"],X=e("i",{class:"text-md fas fa-trash-alt"},null,-1),Y=[X],oe=v({__name:"mongo-db",setup(h){const s=y();I();const b=k(),a=x({showAddDialog:!1});function p(n,o){b.dialog({title:"Remove Database",message:"Are you sure you would like to remove this database?",dark:s.isDark,cancel:!0}).onOk(async()=>{const l=s.project.mongoDatabses.findIndex(t=>t.name==n.name);l!=-1?(s.project.mongoDatabses.splice(l,1),await N.save(s.project),m.success("Database was deleted successfully.")):m.error("Database was not found!")})}function D(){a.showAddDialog=!1}return(n,o)=>{const l=C("router-link");return c(),u("div",G,[e("div",H,[J,e("button",{class:"btn btn-green",onClick:o[0]||(o[0]=t=>a.showAddDialog=!0)}," Add Database ")]),e("div",K,[(c(!0),u(R,null,M(r(s).project.mongoDatabses,(t,g)=>(c(),u("div",{key:g,class:"px-4 py-2 mt-2 flex-between rounded-lg bg-gray-300 dark:bg-gray-700"},[e("span",null,[w("Database name: "),e("b",null,V(t.name),1)]),e("div",P,[j(l,{to:`mongo-db/${t.name}`,class:"btn btn-blue"},{default:A(()=>[w(" Detail ")]),_:2},1032,["to"]),e("button",{class:"btn-squar btn-red",onClick:i=>p(t)},Y,8,W)])]))),128))]),a.showAddDialog?(c(),$(U,{key:0,show:a.showAddDialog,onCloseDialog:D},null,8,["show"])):q("",!0)])}}});export{oe as default};
