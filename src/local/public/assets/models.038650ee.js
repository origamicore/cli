import{m as v,ab as M,ah as w,r as C,bm as L,ac as R,o as m,b as U,w as S,d,e as f,ad as I,ae as $,h as u,am as _,ai as i,aG as x,aE as D,bn as q,bo as N,ag as Q,t as B,k as E}from"./index.da47becb.js";import{u as A}from"./use-quasar.015d7623.js";import{Q as j}from"./QSelect.f6cc18b0.js";import{_ as O}from"./plugin-vue_export-helper.21dcd24c.js";import"./QItemLabel.a4a1797c.js";import"./rtl.b51694b1.js";const P=c=>(q("data-v-0444641b"),c=c(),N(),c),T={class:"flex flex-col gap-2 mt-2"},F=["onClick"],G=P(()=>d("i",{class:"text-md fas fa-trash-alt"},null,-1)),z=[G],H=v({__name:"model-dialog",props:["show","model"],emits:["closeDialog"],setup(c,{emit:g}){const p=c;A();const b=M(),e=w(),s=C({entity:structuredClone(L(p.model)),types:["string","number","boolean"]});for(let t of e.project.modules)for(let l of t.models)s.types.push(t.name+"."+l.name);function V(){s.entity.properies.push(new D.PropertyModel({decorator:{name:"OriProps",data:{isRequired:!1}},isArray:!1,name:"prop"+(s.entity.properies.length+1)}))}function y(t){s.entity.properies.splice(t,1)}function k(){g("closeDialog")}async function n(){const t=e.project.modules.find(l=>l.name==b.params.name);if(t!=null){const l=t==null?void 0:t.models.findIndex(r=>r.name==p.model.name);console.log(l),l!=-1&&(t.models[l]=s.entity,k())}}return(t,l)=>{const r=R("Dialog");return m(),U(r,{show:p.show,title:"Model detail",onCloseDialog:k,onConfirmDialog:n},{default:S(()=>[d("button",{class:"btn btn-green",onClick:V},"Add"),d("div",T,[(m(!0),f(I,null,$(s.entity.properies,(o,h)=>(m(),f("div",{class:"model-card",key:h},[d("button",{class:"model-card-btn",onClick:a=>y(h)},z,8,F),u(_,{modelValue:o.name,"onUpdate:modelValue":a=>o.name=a,outlined:"",dark:i(e).isDark,label:"Name"},null,8,["modelValue","onUpdate:modelValue","dark"]),u(_,{modelValue:o.defaultValue,"onUpdate:modelValue":a=>o.defaultValue=a,outlined:"",dark:i(e).isDark,label:"DefaultValue"},null,8,["modelValue","onUpdate:modelValue","dark"]),u(_,{modelValue:o.maxLength,"onUpdate:modelValue":a=>o.maxLength=a,outlined:"",dark:i(e).isDark,label:"Max Length"},null,8,["modelValue","onUpdate:modelValue","dark"]),u(_,{modelValue:o.minLength,"onUpdate:modelValue":a=>o.minLength=a,outlined:"",dark:i(e).isDark,label:"Min Length"},null,8,["modelValue","onUpdate:modelValue","dark"]),u(x,{label:"Required",dark:i(e).isDark,modelValue:o.decorator.data.isRequired,"onUpdate:modelValue":a=>o.decorator.data.isRequired=a},null,8,["dark","modelValue","onUpdate:modelValue"]),u(x,{label:"Array",dark:i(e).isDark,modelValue:o.isArray,"onUpdate:modelValue":a=>o.isArray=a},null,8,["dark","modelValue","onUpdate:modelValue"]),u(j,{outlined:"",dark:i(e).isDark,modelValue:o.type,"onUpdate:modelValue":a=>o.type=a,options:s.types,label:"Class Type"},null,8,["dark","modelValue","onUpdate:modelValue","options"]),u(_,{modelValue:o.description,"onUpdate:modelValue":a=>o.description=a,outlined:"",dark:i(e).isDark,label:"Description"},null,8,["modelValue","onUpdate:modelValue","dark"])]))),128))])]),_:1},8,["show"])}}});var J=O(H,[["__scopeId","data-v-0444641b"]]);const K=d("span",null,"Models:",-1),W={class:"flex items-center gap-1"},X=["onClick"],Y=["onClick"],Z=d("i",{class:"text-md fas fa-trash-alt"},null,-1),ee=[Z],se=v({__name:"models",setup(c){const g=w(),p=M(),b=A(),e=C({module:g.project.modules.filter(n=>n.name==p.params.name)[0],showModelDialog:!1,selectedModel:null});function s(){e.module.models||(e.module.models=[]);let n=new D.EntityModel({decorator:new D.DecoratorModel({name:"OriModel"})});n.name="model"+(e.module.models.length+1),e.module.models.push(n)}function V(n,t){b.dialog({title:"Remove Model",message:"Are you sure you would like to remove this model?",dark:g.isDark,cancel:!0}).onOk(async()=>{var r,o;const l=(r=e.module)==null?void 0:r.models.findIndex(h=>h.name==n.name);l!=-1&&t==l&&((o=e.module)==null||o.models.splice(l,1))})}function y(n,t){e.showModelDialog=!0,e.selectedModel=n}function k(){e.showModelDialog=!1,e.selectedModel=null}return(n,t)=>(m(),f("div",null,[d("div",{class:"px-4 py-2 flex-between rounded-lg bg-gray-300 dark:bg-gray-700"},[K,d("button",{class:"btn btn-green",onClick:s}," Add model ")]),(m(!0),f(I,null,$(e.module.models,(l,r)=>(m(),f("div",{key:r,class:"px-4 py-2 mt-2 flex-between rounded-lg bg-gray-300 dark:bg-gray-700"},[d("span",null,[Q("Service name: "),d("b",null,B(l.name),1)]),d("div",W,[d("button",{class:"btn btn-blue",onClick:o=>y(l)}," Detail ",8,X),d("button",{class:"btn-squar btn-red",onClick:o=>V(l,r)},ee,8,Y)])]))),128)),e.showModelDialog?(m(),U(J,{key:0,show:e.showModelDialog,model:e.selectedModel,onCloseDialog:k},null,8,["show","model"])):E("",!0)]))}});export{se as default};
